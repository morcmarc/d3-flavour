{"version":3,"sources":["webpack:///webpack/bootstrap b2441090fffbea07308b","webpack:///./src/flavour.js","webpack:///./src/range.js","webpack:///./src/merge.js"],"names":[],"mappings":"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","file":"./dist/d3-flavour.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b2441090fffbea07308b\n **/","import { range } from './range';\nimport { merge } from './merge';\n\nconst defaultOptions = {\n    depth    : 5,\n    flavours : ['Malty', 'Sour', 'Floral', 'Fruit', 'Sweet', 'Smooth', 'Bitter', 'Hoppy'],\n    thickness: 0.1,\n    bgColor  : '#fff',\n    fgColor1 : '#ccc',\n    fgColor2 : '#666',\n    fgColor3 : 'orange',\n    color    : '#888',\n};\n\nlet _getId = (id, i, d = 0) => {\n    return id + '_a_' + i + '_' + d;\n}\n\nlet _getIdSelector = (id, i, d = 0) => {\n    return '#' + _getId(id, i, d);\n}\n\nlet _getColor = (datum, d, options, width) => {\n    return (options.depth - datum) <= d \n        ? options.fgColor2 \n        : options.fgColor1;\n}\n\nlet _getArcForFlavourAndDepth = (f, d, width, options) => {\n    // Number of segments\n    let n = options.flavours.length;\n    // Segment length\n    let s = Math.PI * 2 / n;\n    // Start angle\n    let s_a = f * s;\n    // End angle\n    let e_a = (f + 1) * s;\n    return d3.svg\n        .arc()\n        .innerRadius(width / 2 * (1 - (d + 1) * options.thickness))\n        .outerRadius(width / 2 * (1 - options.thickness - (d + 1) * options.thickness))\n        .startAngle(s_a)\n        .endAngle(e_a);\n}\n\nlet _draw = (svg, id, data, width, height, options) => {\n    let c = svg\n        .selectAll('.flavour-arc')\n        .data(data);\n    \n    let g = c    \n        .enter()\n        .append('g')\n        .attr('class', '.flavour-arc');\n\n    c.exit().remove();\n    \n    g.append((datum, i) => { \n        let sg = d3.select(document.createElementNS(d3.ns.prefix.svg, 'g'));\n\n        range(options.depth).forEach((d) => {\n            sg.append('path')\n                .attr('d', _getArcForFlavourAndDepth(i, d, width, options))\n                .attr('transform', 'translate(' + width / 2 + ',' + width / 2 + ')')\n                .attr('fill', _getColor(datum, d, options, width))\n                .attr('stroke-width', width / 60)\n                .attr('stroke', options.bgColor)\n                .attr('id', _getId(id, i, d))\n                .style('cursor', 'pointer')\n                .on('mouseover', () => {\n                    d3.select(_getIdSelector(id, i, d)).transition()\n                        .ease('elastic')\n                        .duration(300)\n                        .attr('fill', options.fgColor3);\n                })\n                .on('mouseout', () => {\n                    d3.select(_getIdSelector(id, i, d)).transition()\n                        .ease('quad')\n                        .duration(100)\n                        .attr('fill', _getColor(datum, d, options, width));\n                })\n                .on('click', () => {\n                    let newData = data.slice(0);\n                    \n                    newData[i] = options.depth - d;\n                    if(newData[i] === data[i]) {\n                        newData[i] = 0;\n                    }\n                    \n                    if(typeof options.callback === 'function') {\n                        options.callback(newData);\n                    }\n                    \n                    c.selectAll(\"*\").remove();\n                    \n                    _draw(svg, id, newData, width, height, options);\n                });\n        });\n\n        let t = sg.append('text')\n            .attr('x', 0)\n            .attr('dy', (-width / 90))\n            .style('font-size', (width / 20) + 'px')\n            .style('font-family', 'Verdana')\n            .style(\"text-anchor\",\"middle\");\n\n        t.append('textPath')\n            .attr('fill', options.color)\n            .attr('xlink:href', _getIdSelector(id, i))\n            .attr(\"startOffset\", \"20%\")\n            .text(options.flavours[i]);\n\n        return sg.node(); \n    });\n}\n\nexport let transformData = (data) => {\n    return Object.keys(data).map(key => data[key]);\n}\n\nexport let chart = (id, data, options = defaultOptions) => {\n    let opts = merge(defaultOptions, options);\n    let base = d3.select('#' + id);\n    let width = base.node().getBoundingClientRect().width;\n    let height = base.node().getBoundingClientRect().height;\n    let svg = base\n        .append(\"svg\")\n        .attr(\"width\" , width)\n        .attr(\"height\", height);\n    _draw(svg, id, data, width, height, opts);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/flavour.js\n **/","export let range = (n) => {\n    return Array.from(Array(n).keys());\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/range.js\n **/","export let merge = (obj1,obj2) => {\n    let obj3 = {};\n    for (let attrname in obj1) { obj3[attrname] = obj1[attrname]; }\n    for (let attrname in obj2) { obj3[attrname] = obj2[attrname]; }\n    return obj3;\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.js\n **/"],"sourceRoot":""}